@{
    ViewBag.Title = "Open Savings Account";
}

<div class="container py-4">
    <h2>Open Savings Account</h2>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger">@Html.Raw(TempData["Error"])</div>
    }
    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success">@Html.Raw(TempData["Success"])</div>
    }

    @if (ViewBag.NewAccountId != null)
    {
        <div class="alert alert-success">
            <h5>Account Created Successfully!</h5>
            <p><strong>Account ID:</strong> @ViewBag.NewAccountId</p>
            <p><strong>Customer ID:</strong> @ViewBag.LastCustID</p>
            <p><strong>Opening Balance:</strong> Rs @ViewBag.LastDeposit</p>
        </div>
    }

    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Create New Savings Account</h5>
            
            @using (Html.BeginForm("OpenSavingsAccount", "Employee", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                
                <div class="mb-3">
                    <label for="CustID" class="form-label">Customer ID <span class="text-danger">*</span></label>
                    <input type="text" name="CustID" id="CustID" class="form-control" placeholder="Enter Customer ID" value="@ViewBag.LastCustID" required />
                    <small class="text-muted">Enter the customer ID who wants to open a savings account.</small>
                </div>

                <div class="mb-3">
                    <label for="InitialDeposit" class="form-label">Initial Deposit <span class="text-danger">*</span></label>
                    <input type="number" step="0.01" name="InitialDeposit" id="InitialDeposit" class="form-control" placeholder="Enter initial deposit amount" value="@ViewBag.LastDeposit" required />
                    <small class="text-muted">Minimum opening balance: Rs 1,000</small>
                </div>

                <button type="submit" class="btn btn-primary">Create Account</button>
                <a href="@Url.Action("SavingsEmployeeHome")" class="btn btn-secondary">Cancel</a>
            }
        </div>
    </div>

    <div class="card mt-3">
        <div class="card-body">
            <h6 class="card-title">Instructions</h6>
            <ul>
                <li>Customer ID must be valid and registered in the system</li>
                <li>Customer should not already have a savings account</li>
                <li>Minimum opening balance is Rs 1,000</li>
                <li>Account will be created immediately after submission</li>
            </ul>
        </div>
    </div>
</div>