@model BigBank.Models.ManagerDashboardViewModel

@{
    ViewBag.Title = "Loan Department Dashboard";
}

<div class="container py-4">
    <h2>Loan Department Dashboard</h2>
    <p class="text-muted">Employee: @Session["Username"] (@Session["UserID"])</p>

    <!-- Summary Cards -->
    <div class="row g-3 mb-3">
        <div class="col-12 col-md-3">
            <div class="card h-100 p-3 text-center summary-card">
                <div class="card-body">
                    <div class="mb-2"><i class="bi bi-people" style="font-size:1.5rem;color:#d4a017"></i></div>
                    <div class="h5 mb-0">@Model.TotalCustomers</div>
                    <div class="small text-muted">Total Customers</div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-3">
            <a href="@Url.Action("EmployeeViewLoanAccounts")" class="text-decoration-none">
                <div class="card h-100 p-3 text-center summary-card">
                    <div class="card-body">
                        <div class="mb-2"><i class="bi bi-cash-stack" style="font-size:1.5rem;color:#198754"></i></div>
                        <div class="h5 mb-0">@Model.LoanCount</div>
                        <div class="small text-muted">Loan Accounts</div>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-md-3">
            <div class="card h-100 p-3 text-center summary-card">
                <div class="card-body">
                    <div class="mb-2"><i class="bi bi-exclamation-circle" style="font-size:1.5rem;color:#dc3545"></i></div>
                    <div class="h5 mb-0">@Model.ActiveLoansCount</div>
                    <div class="small text-muted">Active Loans</div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-3">
            <a href="@Url.Action("EmployeeViewLoanTransactions", new { hours = 24 })" class="text-decoration-none">
                <div class="card h-100 p-3 text-center summary-card">
                    <div class="card-body">
                        <div class="mb-2"><i class="bi bi-clock-history" style="font-size:1.5rem;color:#6c757d"></i></div>
                        <div class="h5 mb-0">@Model.RecentTransactionsCount</div>
                        <div class="small text-muted">Recent Transactions (24h)</div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="row g-3 mb-3">
        <div class="col-12">
            <div class="card h-100 p-3 text-center summary-card">
                <div class="card-body">
                    <div class="mb-2"><i class="bi bi-wallet2" style="font-size:1.5rem;color:#fd7e14"></i></div>
                    <div class="h5 mb-0">Rs @Model.PendingLoanAmount.ToString("N2")</div>
                    <div class="small text-muted">Total Pending Loan Amount</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Cards -->
    <div class="row g-3 my-3">
        <div class="col-12 col-md-4">
            <a href="@Url.Action("EmployeeViewLoanAccounts")" class="text-decoration-none">
                <div class="card h-100 clickable-card">
                    <div class="card-body">
                        <h5 class="card-title">View Loan Accounts</h5>
                        <p class="card-text text-muted">Browse all loan accounts.</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-md-4">
            <a href="@Url.Action("EmployeeViewCustomers")" class="text-decoration-none">
                <div class="card h-100 clickable-card">
                    <div class="card-body">
                        <h5 class="card-title">View Customers</h5>
                        <p class="card-text text-muted">Browse customer details.</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-md-4">
            <a href="@Url.Action("EmployeeViewLoanTransactions")" class="text-decoration-none">
                <div class="card h-100 clickable-card">
                    <div class="card-body">
                        <h5 class="card-title">View Transactions</h5>
                        <p class="card-text text-muted">View loan transaction history.</p>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="row g-3">
        <div class="col-12 col-md-6">
            <a href="@Url.Action("ChangePassword")" class="text-decoration-none">
                <div class="card h-100 clickable-card">
                    <div class="card-body">
                        <h5 class="card-title">Change Password</h5>
                        <p class="card-text text-muted">Update your account password.</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-12 col-md-6">
            <a href="@Url.Action("Logout")" class="text-decoration-none">
                <div class="card h-100 clickable-card">
                    <div class="card-body">
                        <h5 class="card-title">Logout</h5>
                        <p class="card-text text-muted">Sign out of your account.</p>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>

<style>
    .clickable-card { cursor: pointer; }
    .clickable-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); transform: translateY(-2px); transition: all .15s ease-in-out; }
    .summary-card .card-body { display:flex; flex-direction:column; justify-content:center; align-items:center; min-height:120px; }
</style>
