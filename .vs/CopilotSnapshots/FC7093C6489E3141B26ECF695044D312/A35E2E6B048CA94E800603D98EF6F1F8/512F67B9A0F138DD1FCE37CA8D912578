@model BigBank.Models.SavingsDetailViewModel

@{
    ViewBag.Title = "Savings Account - BigBank";
}

<div class="container py-4">
    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm mb-3">
                <div class="card-body">
                    <h4>Savings Account: @Model.Account.SBAccountID</h4>
                    <p>Balance: @("Rs " + Model.Account.Balance.ToString("N2"))</p>
                    <p>Created On: @Model.Account.CreatedOn</p>
                    @if (TempData["Error"] != null)
                    {
                        <div class="alert alert-danger">@TempData["Error"]</div>
                    }
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-body">
                    <h5>Deposit</h5>
                    @using (Html.BeginForm("Deposit", "Customer", FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()
                        @Html.Hidden("id", Model.Account.SBAccountID)
                        <div class="input-group mb-2">
                            <input type="number" step="0.01" min="1" name="depositAmount" class="form-control" placeholder="Amount" />
                            <button class="btn btn-primary" type="submit">Deposit</button>
                        </div>
                    }
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-body">
                    <h5>Withdraw</h5>
                    @using (Html.BeginForm("Withdraw", "Customer", FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()
                        @Html.Hidden("id", Model.Account.SBAccountID)
                        <div class="input-group mb-2">
                            <input type="number" step="0.01" min="1" name="withdrawAmount" class="form-control" placeholder="Amount" />
                            <button class="btn btn-primary" type="submit">Withdraw</button>
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5>Recent Transactions</h5>
                    @if (Model.Transactions != null && Model.Transactions.Count > 0)
                    {
                        <table class="table table-sm">
                            <thead>
                                <tr><th>Date</th><th>Type</th><th class="text-end">Amount</th><th>Remarks</th></tr>
                            </thead>
                            <tbody>
                                @foreach (var t in Model.Transactions)
                                {
                                    <tr>
                                        <td>@t.TransactionDate.ToString("g")</td>
                                        <td>@t.TransactionType</td>
                                        <td class="text-end">@("Rs " + t.Amount.ToString("N2"))</td>
                                        <td>@t.Remarks</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                    else
                    {
                        <p class="text-muted">No transactions found.</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
